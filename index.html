<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>网址监测器</title>
</head>
<body>
    <div class="container">
        <h1>网址监测器</h1>
        <form id="monitorForm">
            <input type="text" id="url" placeholder="输入网址 (例如 https://example.com)" required>
            <input type="text" id="name" placeholder="输入网站名称" required>
            <button type="submit">添加监测</button>
        </form>
        <button id="exportList">导出监测列表</button>
        <ul id="websiteList"></ul>
    </div>

    <script>
        document.getElementById('monitorForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const url = document.getElementById('url').value;
            const name = document.getElementById('name').value;
            addWebsite(url, name);
            displayWebsites();
            document.getElementById('url').value = '';
            document.getElementById('name').value = '';
        });

        function addWebsite(url, name) {
            const website = { url, name };
            let websites = JSON.parse(localStorage.getItem('monitoredWebsites')) || [];
            websites.push(website);
            localStorage.setItem('monitoredWebsites', JSON.stringify(websites));
        }

        function displayWebsites() {
            const websites = JSON.parse(localStorage.getItem('monitoredWebsites')) || [];
            const websiteList = document.getElementById('websiteList');
            websiteList.innerHTML = '';
            websites.forEach(website => {
                const listItem = document.createElement('li');
                listItem.textContent = `${website.name}: ${website.url}`;
                websiteList.appendChild(listItem);
            });
        }

        document.getElementById('exportList').addEventListener('click', function() {
            const websites = localStorage.getItem('monitoredWebsites');
            if (!websites) {
                alert("没有监测的网站可导出。");
                return;
            }
            const blob = new Blob([websites], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'monitored_websites.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        });

        // 页面加载时显示已保存的网站
        window.onload = displayWebsites;
    </script>
</body>
</html>
